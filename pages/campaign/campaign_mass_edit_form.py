import timefrom selenium.webdriver.common.by import Byfrom selenium.webdriver.common.keys import Keysfrom locators.campaign.campaign_mass_edit_form_locator import CampaignMassEditFormLocatorfrom pages.base_page import BasePageclass DspDashboardCampaignsMassEdit(BasePage):    def __init__(self, driver):        super().__init__(driver)    def provide_campaign_mass_edit_data_and_save(self, campaign_name_list, campaign_mass_edit_data):        self.wait_for_visibility_of_element(CampaignMassEditFormLocator.edit_campaign_header_locator)        for iteration in range(len(campaign_name_list)):            # SETTING VALUE INTO ALL INPUT FIELDS            self.setting_value_into_all_form_grid_input_field(campaign_name_list, campaign_mass_edit_data,                                                              str(iteration + 2))            # SETTING VALUE INTO DROPDOWN FIELD            self.select_dropdown_value_from_specific_form_grid(                CampaignMassEditFormLocator.campaign_mass_edit_form_id, CampaignMassEditFormLocator.ad_domain_column,                campaign_mass_edit_data['landing_and_creatives']['ad_domain'], str(iteration + 2))            # SETTING VALUE INTO ALL MODALS            self.setting_value_into_all_modal_field(campaign_mass_edit_data, str(iteration + 2))            # SETTING VALUE INTO CREATIVES COLUMN            self.setting_value_into_creatives_column(CampaignMassEditFormLocator.campaign_mass_edit_form_id,                                                     campaign_mass_edit_data['landing_and_creatives']['creative'],                                                     str(iteration + 2))        # SAVE DATA        time.sleep(self.TWO_SEC_DELAY)        self.wait_for_presence_of_element(CampaignMassEditFormLocator.save_button_locator)        self.wait_for_element_to_be_clickable(CampaignMassEditFormLocator.save_button_locator)        self.click_on_element(CampaignMassEditFormLocator.save_button_locator)    def setting_value_into_all_form_grid_input_field(self, campaign_name_list, campaign_mass_edit_data, row_number):        self.set_value_into_specific_form_grid_input_field(            CampaignMassEditFormLocator.campaign_mass_edit_form_id,            CampaignMassEditFormLocator.name_column, campaign_name_list[int(row_number) - 2], str(row_number))        self.set_value_into_specific_form_grid_input_field(            CampaignMassEditFormLocator.campaign_mass_edit_form_id,            CampaignMassEditFormLocator.bid_cpm_column, campaign_mass_edit_data['launch_date_and_budget']['bid_cpm']            , str(row_number))        self.set_value_into_specific_form_grid_input_field(            CampaignMassEditFormLocator.campaign_mass_edit_form_id,            CampaignMassEditFormLocator.daily_budget_column,            campaign_mass_edit_data['launch_date_and_budget']['daily_budget'], str(row_number))        self.set_value_into_specific_form_grid_input_field(            CampaignMassEditFormLocator.campaign_mass_edit_form_id,            CampaignMassEditFormLocator.total_budget_column,            campaign_mass_edit_data['launch_date_and_budget']['total_budget'], str(row_number))        self.set_value_into_specific_form_grid_input_field(            CampaignMassEditFormLocator.campaign_mass_edit_form_id,            CampaignMassEditFormLocator.landings_column,            campaign_mass_edit_data['landing_and_creatives']['click_url'], str(row_number))    def setting_value_into_all_modal_field(self, campaign_mass_edit_data, row_number):        self.select_value_from_specific_form_grid_modal(            CampaignMassEditFormLocator.campaign_mass_edit_form_id, CampaignMassEditFormLocator.sec_column,            campaign_mass_edit_data['location_and_audiences']['sec'], str(row_number))        mobile_operator = campaign_mass_edit_data['platforms_telco_and_devices']['mobile_operator']        mobile_operator = mobile_operator.split(" - ")        self.select_value_from_specific_form_grid_modal(            CampaignMassEditFormLocator.campaign_mass_edit_form_id, CampaignMassEditFormLocator.operators_column,            mobile_operator[0], str(row_number))    def setting_value_into_optimisations_column(self, form_tag_id, campaign_mass_edit_data, row_number):        index = self.get_specific_form_grid_column_index(form_tag_id, CampaignMassEditFormLocator.optimisations_column)        self.select_optimisations_column_value_into_mass_edit_form_grid(            CampaignMassEditFormLocator.campaign_mass_edit_form_id,            campaign_mass_edit_data['optimisations_deals_and_packages']['auto_opt_checkbox'], str(row_number))        self.set_value_into_specific_input_field_under_auto_optimisation(            campaign_mass_edit_data['optimisations_deals_and_packages']['auto_opt_checkbox'],            campaign_mass_edit_data['optimisations_deals_and_packages']['minimum_ctr'], "", True,            str(row_number))        self.set_value_into_specific_input_field_under_auto_optimisation(            campaign_mass_edit_data['optimisations_deals_and_packages']['auto_opt_checkbox'],            campaign_mass_edit_data['optimisations_deals_and_packages']['minimum_imp_per_placement_to_learn'],            CampaignMassEditFormLocator.minimum_impressions_per_placement_to_learn_field_label, False,            str(row_number))        self.set_value_into_specific_input_field_under_auto_optimisation(            campaign_mass_edit_data['optimisations_deals_and_packages']['auto_opt_checkbox'],            campaign_mass_edit_data['optimisations_deals_and_packages']['minimum_spend_per_placement_to_learn'],            CampaignMassEditFormLocator.minimum_spend_per_placement_to_learn_field_label, False, str(row_number))        self.click_ok_button_of_specific_column_modal_from_grid(form_tag_id,                                                                CampaignMassEditFormLocator.optimisations_column,                                                                str(row_number))        time.sleep(self.TWO_SEC_DELAY)    def select_optimisations_column_value_into_mass_edit_form_grid(self, form_tag_id,                                                                   column_value_to_select, row_number="1"):        index = self.get_specific_form_grid_column_index(form_tag_id, CampaignMassEditFormLocator.optimisations_column)        button_locator = (By.XPATH, "//form[@id='" + form_tag_id + "']//tbody//tr[" + row_number + "]//td[" +                          str(index) + "]//button[@data-toggle='modal']")        self.click_on_element(button_locator)        time.sleep(self.TWO_SEC_DELAY)        self.check_uncheck_specific_checkbox(CampaignMassEditFormLocator.cpc_cost_per_click_checkbox_label, False,                                             index=row_number)        time.sleep(self.ONE_SEC_DELAY)        self.check_uncheck_specific_checkbox(CampaignMassEditFormLocator.ctr_click_through_rate_checkbox_label,                                             False, index=row_number)        time.sleep(self.ONE_SEC_DELAY)        self.check_uncheck_specific_checkbox(CampaignMassEditFormLocator.cpa_cost_per_action_checkbox_label, False,                                             index=row_number)        time.sleep(self.ONE_SEC_DELAY)        self.check_uncheck_specific_checkbox(CampaignMassEditFormLocator.vr_viewability_rate_checkbox_label, False,                                             index=row_number)        self.check_uncheck_specific_checkbox(CampaignMassEditFormLocator.er_engagement_rate_checkbox_label, False,                                             index=row_number)        self.check_uncheck_specific_checkbox(CampaignMassEditFormLocator.cpe_cost_per_engagement_checkbox_label, False,                                             index=row_number)        self.check_uncheck_specific_checkbox(CampaignMassEditFormLocator.sr_session_rate_checkbox_label, False,                                             index=row_number)        self.check_uncheck_specific_checkbox(CampaignMassEditFormLocator.cps_cost_per_session_checkbox_label, False,                                             index=row_number)        time.sleep(self.ONE_SEC_DELAY)        self.check_uncheck_specific_checkbox(column_value_to_select, True, index=row_number)    def set_value_into_specific_input_field_under_auto_optimisation(self, checkbox_name, text, field_name="",                                                                    first_field=False, row_number="1"):        if first_field:            locator = (By.XPATH,                       "(//label[normalize-space()='" + checkbox_name + "']/..//..//div[@class='form-group "                                                                        "js-optimisation-learn-amount-container']//input)[" + str(                           row_number) + "]")        else:            locator = (By.XPATH, "(//label[normalize-space()='" + checkbox_name + "']/..//..//label[normalize-space("                                                                                  ")='" + field_name + "']/..//input)[" + str(                row_number) + "]")        self.set_value_into_element(locator, text)    def setting_value_into_creatives_column(self, form_tag_id, column_value_to_select, row_number="1"):        index = self.get_specific_form_grid_column_index(form_tag_id, CampaignMassEditFormLocator.creatives_column)        button_locator = (By.XPATH, "//form[@id='" + form_tag_id + "']//tbody//tr[" + str(row_number) + "]//td[" +                          str(index) + "]//a")        cross_button_locator = (            By.XPATH, "(//span[@class='select2-selection__choice__remove'])[" + str(int(row_number)-1) + "]")        input_field_locator = (By.XPATH, "(//ul[@class='select2-selection__rendered']//input)[" + str(int(row_number)-1) + "]")        self.click_on_element(button_locator)        time.sleep(self.TWO_SEC_DELAY)        self.click_on_element(cross_button_locator)        self.set_value_into_element(input_field_locator, column_value_to_select)        self.wait_for_presence_of_element(input_field_locator).send_keys(Keys.ENTER)        time.sleep(self.TWO_SEC_DELAY)        self.click_ok_button_of_specific_column_modal_from_grid(form_tag_id,                                                                CampaignMassEditFormLocator.creatives_column,                                                                str(row_number))